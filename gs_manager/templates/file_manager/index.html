{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}File Manager{% endblock %}</h1>

{% endblock %}

{% block content %}
  <html>
    <head>
      <title>File manager</title>
    </head>
    <body>
      <div align="center">
        <h1>Local file system</h1>
      </div>
        <form action="/file_manager/md">
          <input type="submit" value="New folder"/>
          <input name="folder" type="text" value="new_folder"/>
        </form>

        <form action = "/file_manager/upload" method = "post" enctype="multipart/form-data">
          <label> Upload File: </label>
            <input type="file" name="file" />
            <input type="hidden" id="cur_dir", name="dur_dir", value="{{ cwd }}">
            <input type = "submit" value="Upload">
        </form>

      <table class="file_table">
        <tr>
          <th></th>
          <th></th>
          <th></th>
        </tr>
        <tr>
          <td><a href="/file_manager/cd?path={{ cwd }}&go_par=yes">..</a></td>
          <td></td>
        </tr>
          {% for file in file_info %}
            <tr>
              {% if '.' != file[0][0] %}
                {% if file[1] == "file" %}
                  <td><strong><a href="/file_manager/cd?path={{cwd + '/' + file[0]}}">{{file[0]}}</a></strong></td><td><a href="/file_manager/download?path={{cwd + '/' + file[0]}}"> (Download)</a></td><td><a href="/file_manager/rm?path={{cwd + '/' + file[0]}}"> (Delete)</a></td>
                {% else %}
                  <td><strong><a href="/file_manager/cd?path={{cwd + '/' + file[0]}}">{{file[0]}}</a></strong></td><td></td><td><a href="/file_manager/rm?path={{cwd + '/' + file[0]}}"> (Delete)</a></td>
                {% endif%}
              {% else %}
                <td>{{file[0]}}</td><td></td>
              {% endif%}
          {% endfor %}
      </table>
    </body>
  </html>
{% endblock %}

